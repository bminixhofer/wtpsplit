# Backwards Compatibility Tests

## Motivation

This directory contains a set of tests that can be run to ensure that newly introduced changes or refactorings do not break existing functionalities. These tests verify model output consistency between two branches; here, we use the names `dev` and `main` for demonstration purposes, but these tests can be performed between any two branches where the `back_comp` directory with tests is available.
For this, the test script performs a forward pass for each supported model and compares the outputs between `dev` and `main` to identify any differences.

## Requirements

To execute these tests, you must meet the following requirements:

- Ability to run bash scripts (in-built on Linux/macOS; for Windows, consider using third-party software like [GNU Bash](https://www.gnu.org/software/bash/)).
- Git as the version control system to switch between branches.
- The ability to check out the desired branch. If the branch is from another fork, you may need to add the repository as a remote. Refer to [GitHub's instructions](https://docs.github.com/en/get-started/getting-started-with-git/managing-remote-repositories) for details.
- A Python virtual environment to modify the installed package version of `adapters`.

## Procedure

To perform the compatibility tests, follow these steps:

1. Determine a directory where you want to save the model output generated by the tests. Save this directory path to the variable `SaveDir` in the shell script `compare.sh`. (Careful: select a directory OUTSIDE of the repository; otherwise, the saved model output is no longer available when changing the branch.)
2. Select the branch you want to compare with `main` and save its name to the variable `Branch`.
3. Make sure you are checked out in `main` before starting the test script. 
4. In your command line, navigate to the `back_comp` directory and execute the script by running `sh compare.sh`.

The results will be displayed in the command line for visualization.